(this["webpackJsonprandom-dungeon"]=this["webpackJsonprandom-dungeon"]||[]).push([[0],{14:function(e,t,n){e.exports=n(23)},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n(13),o=n(1),l=n.n(o),s=n(9),c=n(2),u=n(6),f=n(4);n(20);!function(e){e[e.CreateTiles=0]="CreateTiles",e[e.CreateNodes=1]="CreateNodes",e[e.AssociateTiles=2]="AssociateTiles",e[e.LinkNodes=3]="LinkNodes",e[e.FilterLinks=4]="FilterLinks",e[e.ExpandLines=5]="ExpandLines",e[e.CreateRooms=6]="CreateRooms",e[e.DetectWalls=7]="DetectWalls",e[e.CurveWalls=8]="CurveWalls",e[e.FillBackdrop=9]="FillBackdrop",e[e.Render=10]="Render",e[e.FIRST_STEP=0]="FIRST_STEP"}(r||(r={}));var h=[r.CreateTiles,r.CreateNodes,r.AssociateTiles,r.LinkNodes,r.FilterLinks,r.ExpandLines,r.CreateRooms,r.DetectWalls,r.CurveWalls,r.FillBackdrop,r.Render];function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Render,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=0,a=0,o=0,l=!1,s=!1,c=!1,u=!1,f=!1,h=!1;switch(e){case r.CreateTiles:s=!0;break;case r.CreateNodes:i=1,s=!0;break;case r.AssociateTiles:i=1,a=.66,s=!0;break;case r.LinkNodes:i=1,a=.5,o=.25,s=!0;break;case r.FilterLinks:i=.75,a=.55,l=!0,s=!0;break;case r.ExpandLines:case r.CreateRooms:a=.5,s=!0;break;case r.DetectWalls:s=!0;break;case r.CurveWalls:s=!0,c=!0,u=!t;break;case r.FillBackdrop:s=!0,c=!0,h=!0;break;case r.Render:s=!0,c=!0,f=!0}return{nodeAlpha:i,regionAlpha:a,graphAlpha:o,drawNodeLinks:l,drawGrid:s,drawWalls:c,highlightWallCurves:u,drawOutsidePoints:h,drawOutside:f,floorColor:"#fff",floorGridColor:"rgba(192,192,192,0.5)",linkColor:"#000",linkWidth:1,backgroundColor:"#fff",hatchingColor:"#000",wallColor:"#000",cellSize:n,wallWidth:n,floorGridWidth:1,hatchingWidth:.175*n,drawWallsAsFloor:!0,minimumSpanningWidth:n,relativeNeighbourhoodWidth:.5*n,gabrielWidth:.25*n,delauneyWidth:1}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(e){var t=e.isGenerating?i.createElement("button",{className:"menu__button"},"Skip step"):i.createElement("button",{className:"menu__button",onClick:e.generate},"Generate new"),n=e.isGenerating?i.createElement("button",{className:"menu__button"},"Finish"):i.createElement("button",{className:"menu__button",onClick:e.animate},"Animate generation");return Object(i.useEffect)((function(){e.setRenderSettings(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d(r.Render,!0,e.cellSize)))}),[]),i.createElement("div",{className:"menu menu--autoGenerate"},i.createElement("button",{className:"menu__link",onClick:e.showSize},"Map size"),i.createElement("button",{className:"menu__link",onClick:e.showRegions},"Edit regions"),i.createElement("div",{className:"menu__spacer"}),t,n)},y=function(e){var t=e.onChange,n=e.onChangeComplete,r=Object(i.useMemo)((function(){if(void 0!==t)return function(e){return t(e.target.valueAsNumber)}}),[t]),a=Object(i.useMemo)((function(){if(void 0!==n)return function(){return n()}}),[n]);return i.createElement("label",{className:e.className},e.label,i.createElement("input",{type:"range",className:e.inputClassName,min:e.min,max:e.max,value:e.value,onChange:r,onMouseUp:a,onTouchEnd:a,disabled:e.disabled}))};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,x=function(e){return Object(i.useEffect)((function(){e.setRenderSettings(g({},d(r.DetectWalls,!0,e.cellSize),{drawWallsAsFloor:!1}))}),[]),i.createElement("div",{className:"menu menu--mapSize"},i.createElement("button",{className:"menu__button menu__button--back",onClick:e.goBack},"Go back"),i.createElement("div",{className:"menu__group"},i.createElement(y,{label:"Width",min:20,max:200,value:e.generationSettings.cellsWide,onChange:function(t){var n=t/e.generationSettings.cellsWide,r=!0,i=!1,a=void 0;try{for(var o,l=e.dungeon.nodes[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){o.value.x*=n}}catch(s){i=!0,a=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}e.setGenerationSettings(g({},e.generationSettings,{cellsWide:t}))},onChangeComplete:e.redraw}),i.createElement(y,{label:"Height",min:20,max:200,value:e.generationSettings.cellsHigh,onChange:function(t){var n=t/e.generationSettings.cellsHigh,r=!0,i=!1,a=void 0;try{for(var o,l=e.dungeon.nodes[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){o.value.y*=n}}catch(s){i=!0,a=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}e.setGenerationSettings(g({},e.generationSettings,{cellsHigh:t}))},onChangeComplete:e.redraw})))},k=n(3),w=n(5),S=n(7),O=n(8),j=n(10),P=function(e){function t(e,n){var r;return Object(k.a)(this,t),(r=Object(w.a)(this,Object(S.a)(t).call(this))).x=e,r.y=n,r}return Object(O.a)(t,e),Object(j.a)(t,[{key:"length",value:function(){return this.magnitude(this.x,this.y)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"toUnitLength",value:function(){var e=this.length();return new t(this.x/e,this.y/e)}},{key:"distanceTo",value:function(e){return this.magnitude(this.x-e.x,this.y-e.y)}},{key:"distanceSqTo",value:function(e){return this.magnitudeSq(this.x-e.x,this.y-e.y)}},{key:"directionTo",value:function(e){var n=e.x-this.x,r=e.y-this.y,i=this.magnitude(n,r);return new t(n/i,r/i)}},{key:"halfwayTo",value:function(e){return new t((this.x+e.x)/2,(this.y+e.y)/2)}},{key:"scale",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return new t(this.x*e,this.y*e)}))},{key:"crossProduct",value:function(e){return this.x*e.y-this.y*e.x}},{key:"circumCircle",value:function(e,n){var r=this,i=(r.x-n.x)*(e.y-n.y)-(e.x-n.x)*(r.y-n.y),a=new t((((r.x-n.x)*(r.x+n.x)+(r.y-n.y)*(r.y+n.y))/2*(e.y-n.y)-((e.x-n.x)*(e.x+n.x)+(e.y-n.y)*(e.y+n.y))/2*(r.y-n.y))/i,(((e.x-n.x)*(e.x+n.x)+(e.y-n.y)*(e.y+n.y))/2*(r.x-n.x)-((r.x-n.x)*(r.x+n.x)+(r.y-n.y)*(r.y+n.y))/2*(e.x-n.x))/i);return[a,(n.x-a.x)*(n.x-a.x)+(n.y-a.y)*(n.y-a.y)]}},{key:"magnitude",value:function(e,t){return Math.sqrt(this.magnitudeSq(e,t))}},{key:"magnitudeSq",value:function(e,t){return e*e+t*t}}]),t}((function e(){Object(k.a)(this,e)}));!function(e){e[e.Junction=0]="Junction",e[e.Natural=1]="Natural",e[e.Artificial=2]="Artificial",e[e.NUM_VALUES=3]="NUM_VALUES",e[e.FIRST_VALUE=0]="FIRST_VALUE"}(m||(m={}));var C=function(e){function t(e,n,r,i,a,o){var l,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Object(k.a)(this,t),(l=Object(w.a)(this,Object(S.a)(t).call(this,n,r))).parent=e,l.seed=i,l.regionType=a,l.color=o,l.regionInfluence=s,l.radius=.75,l.links=[],l}return Object(O.a)(t,e),t}(P),R=["7","8","9","a","b","c","d"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var z=function(e){var t=e.dungeonDisplay,n=e.dungeon,a=e.redraw,o=e.cellSize;return Object(i.useEffect)((function(){e.setRenderSettings(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d(r.DetectWalls,!0,e.cellSize),{regionAlpha:.5,nodeAlpha:1,drawWallsAsFloor:!1}))}),[]),Object(i.useEffect)((function(){if(void 0!==t){var e=function(e){var t=e.offsetX/o,r=e.offsetY/o,i=Math.random(),l=Math.floor(Math.random()*m.NUM_VALUES);n.nodes.push(new C(n,t,r,i,l,function(){var e=R[Math.floor(Math.random()*R.length)],t=R[Math.floor(Math.random()*R.length)],n=R[Math.floor(Math.random()*R.length)];return"#".concat(e).concat(t).concat(n)}())),a()},r=function(e){var t=e.offsetX/o,r=e.offsetY/o;e.preventDefault();var i=n.getTileAt(t,r);if(void 0!==i&&null!==i.region){var l=i.region;n.nodes=n.nodes.filter((function(e){return e!==l})),a()}};return t.addEventListener("click",e),t.addEventListener("contextmenu",r),function(){t.removeEventListener("click",e),t.removeEventListener("contextmenu",r)}}}),[t,n,a,o]),i.createElement("div",{className:"menu__section"},"Left click the map to place region nodes. Right click to remove a region.")};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=function(e){var t=e.dungeonDisplay,n=e.dungeon,a=e.redraw,o=e.cellSize;return Object(i.useEffect)((function(){e.setRenderSettings(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d(r.DetectWalls,!0,e.cellSize),{regionAlpha:.5,nodeAlpha:1,drawWallsAsFloor:!1}))}),[]),Object(i.useEffect)((function(){if(void 0!==t){var e=function(e){var t=e.offsetX/o,r=e.offsetY/o,i=n.getTileAt(t,r);void 0!==i&&null!==i.region&&(i.region.regionInfluence*=1.2,a())},r=function(e){var t=e.offsetX/o,r=e.offsetY/o;e.preventDefault();var i=n.getTileAt(t,r);void 0!==i&&null!==i.region&&(i.region.regionInfluence/=1.2,a())};return t.addEventListener("click",e),t.addEventListener("contextmenu",r),function(){t.removeEventListener("click",e),t.removeEventListener("contextmenu",r)}}}),[t,n,a,o]),i.createElement("div",{className:"menu__section"},"Left click a region to grow it, right click a region to shrink it.")};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var A=function(e){var t=e.dungeonDisplay,n=e.dungeon,a=e.redraw,o=e.cellSize;return Object(i.useEffect)((function(){e.setRenderSettings(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d(r.DetectWalls,!0,e.cellSize),{regionAlpha:.5,nodeAlpha:1,drawWallsAsFloor:!1}))}),[]),Object(i.useEffect)((function(){if(void 0!==t){var e=function(e){var t=e.offsetX/o,r=e.offsetY/o,i=n.getTileAt(t,r);void 0!==i&&null!==i.region&&(++i.region.regionType>=m.NUM_VALUES&&(i.region.regionType=m.FIRST_VALUE),a())},r=function(e){var t=e.offsetX/o,r=e.offsetY/o;e.preventDefault();var i=n.getTileAt(t,r);void 0!==i&&null!==i.region&&(i.region.seed=Math.random(),a())};return t.addEventListener("click",e),t.addEventListener("contextmenu",r),function(){t.removeEventListener("click",e),t.removeEventListener("contextmenu",r)}}}),[t,n,a,o]),i.createElement("div",{className:"menu__section"},"Left click a region to change its type. Right click to regenerate it with the same type.")};function W(e,t,n,r){return _.apply(this,arguments)}function _(){return(_=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s,c,u,f,h,d,v,p,y,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,o=!1,s=void 0,e.prev=3,c=t.lines[Symbol.iterator]();case 5:if(a=(u=c.next()).done){e.next=30;break}for(f=u.value,h=N(f,t),d=!0,v=!1,p=void 0,e.prev=11,y=h[Symbol.iterator]();!(d=(b=y.next()).done);d=!0)b.value.isFloor=!0;e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),v=!0,p=e.t0;case 19:e.prev=19,e.prev=20,d||null==y.return||y.return();case 22:if(e.prev=22,!v){e.next=25;break}throw p;case 25:return e.finish(22);case 26:return e.finish(19);case 27:a=!0,e.next=5;break;case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(3),o=!0,s=e.t1;case 36:e.prev=36,e.prev=37,a||null==c.return||c.return();case 39:if(e.prev=39,!o){e.next=42;break}throw s;case 42:return e.finish(39);case 43:return e.finish(36);case 44:case"end":return e.stop()}}),e,null,[[3,32,36,44],[11,15,19,27],[20,,22,26],[37,,39,43]])})))).apply(this,arguments)}function N(e,t){var n=Math.floor(e.from.x),r=Math.floor(e.to.x),i=Math.floor(e.from.y),a=Math.floor(e.to.y),o=t.tilesByCoordinates[n],l=[];if(void 0!==o){var s=o[i];void 0!==s&&l.push(s)}var c=t.tilesByCoordinates[r];if(void 0!==c){var u=c[a];void 0!==u&&l.push(u)}var f=Math.abs(a-i)>Math.abs(r-n);if(f){var h=i;i=n,n=h,h=a,a=r,r=h}if(n>r){var d=r;r=n,n=d,d=a,a=i,i=d}for(var v=(a-i)/(r-n),p=i+.5*v,y=n;y<r;y++){var b=Math.round(p-.5),g=b+.5>p?-1:1,m=Math.abs(p-b)<.1;f?(l.push(t.tilesByCoordinates[b+g][y]),l.push(t.tilesByCoordinates[b][y]),m||l.push(t.tilesByCoordinates[b-g][y])):(l.push(t.tilesByCoordinates[y][b+g]),l.push(t.tilesByCoordinates[y][b]),m||l.push(t.tilesByCoordinates[y][b-g])),p+=v}return l}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F,I=function(e){var t=e.dungeonDisplay,n=e.dungeon,a=e.redraw,o=e.cellSize;Object(i.useEffect)((function(){e.setRenderSettings(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d(r.FilterLinks,!0,e.cellSize),{regionAlpha:.33,drawWallsAsFloor:!1,linkWidth:.5*o,linkColor:"#0c0",graphAlpha:.5,minimumSpanningWidth:.5*o,relativeNeighbourhoodWidth:.25*o,gabrielWidth:.125*o,delauneyWidth:1}))}),[]);var l=function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var a,o=e.delauneyLines[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value,s=N(l,e),c=!0,f=!1,h=void 0;try{for(var d,v=s[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var p=d.value,y=t.get(p);void 0===y&&(y=[],t.set(p,y)),y.push(l)}}catch(C){f=!0,h=C}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}}}catch(C){r=!0,i=C}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var b=new Map,g=!0,m=!1,x=void 0;try{for(var k,w=t[Symbol.iterator]();!(g=(k=w.next()).done);g=!0){var S=k.value,O=Object(u.a)(S,2),j=O[0],P=O[1];1===P.length&&b.set(j,P[0])}}catch(C){m=!0,x=C}finally{try{g||null==w.return||w.return()}finally{if(m)throw x}}return b}(n);return Object(i.useEffect)((function(){if(void 0!==t){var e=function(e){var t=e.offsetX/o,r=e.offsetY/o,i=n.getTileAt(t,r);if(void 0!==i){var s=l.get(i);if(void 0!==s){var c=n.lines.indexOf(s);n.lines=-1!==c?[].concat(Object(f.a)(n.lines.slice(0,c)),Object(f.a)(n.lines.slice(c+1))):[].concat(Object(f.a)(n.lines),[s]),a()}}};return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}}),[t,n,n.lines,l,a,o]),i.createElement("div",{className:"menu__section"},"Left click the map to toggle a pathway on / off.")};!function(e){e[e.AddRemove=0]="AddRemove",e[e.Resize=1]="Resize",e[e.ChangeType=2]="ChangeType",e[e.Connections=3]="Connections"}(F||(F={}));var B,q=function(e){var t,n=Object(i.useState)(F.AddRemove),a=Object(u.a)(n,2),o=a[0],l=a[1];switch(o){case F.AddRemove:t=i.createElement(z,{cellSize:e.cellSize,dungeon:e.dungeon,dungeonDisplay:e.dungeonDisplay,setRenderSettings:e.setRenderSettings,redraw:function(){return e.regenerate([r.CreateTiles].concat(Object(f.a)(h.slice(2))))}});break;case F.Resize:t=i.createElement(L,{cellSize:e.cellSize,dungeon:e.dungeon,dungeonDisplay:e.dungeonDisplay,setRenderSettings:e.setRenderSettings,redraw:function(){return e.regenerate([r.CreateTiles].concat(Object(f.a)(h.slice(2))))}});break;case F.ChangeType:t=i.createElement(A,{cellSize:e.cellSize,dungeon:e.dungeon,dungeonDisplay:e.dungeonDisplay,setRenderSettings:e.setRenderSettings,redraw:function(){return e.regenerate([r.CreateTiles].concat(Object(f.a)(h.slice(2))))}});break;case F.Connections:t=i.createElement(I,{cellSize:e.cellSize,dungeon:e.dungeon,dungeonDisplay:e.dungeonDisplay,setRenderSettings:e.setRenderSettings,redraw:function(){return e.regenerate([r.CreateTiles,r.AssociateTiles].concat(Object(f.a)(h.slice(5))))}})}return i.createElement("div",{className:"menu menu--regionPlacement"},i.createElement("button",{className:"menu__button menu__button--back",onClick:e.goBack},"Go back"),i.createElement("ul",{className:"menu__choice"},i.createElement("li",{className:o===F.AddRemove?"menu__selector menu__selector--active":"menu__selector",onClick:function(){return l(F.AddRemove)}},"Add/remove regions"),i.createElement("li",{className:o===F.Resize?"menu__selector menu__selector--active":"menu__selector",onClick:function(){return l(F.Resize)}},"Resize regions"),i.createElement("li",{className:o===F.ChangeType?"menu__selector menu__selector--active":"menu__selector",onClick:function(){return l(F.ChangeType)}},"Change region types"),i.createElement("li",{className:o===F.Connections?"menu__selector menu__selector--active":"menu__selector",onClick:function(){return l(F.Connections)}},"Add/remove paths")),t)};!function(e){e[e.Main=0]="Main",e[e.Size=1]="Size",e[e.Regions=2]="Regions",e[e.Renders=3]="Renders"}(B||(B={}));var G=function(e){var t=Object(i.useState)(B.Main),n=Object(u.a)(t,2),a=n[0],o=n[1],l=Object(i.useMemo)((function(){return function(){return o(B.Main)}}),[]),s=Object(i.useMemo)((function(){return function(){return o(B.Size)}}),[]),c=Object(i.useMemo)((function(){return function(){return o(B.Regions)}}),[]),d=Object(i.useMemo)((function(){return function(){return o(B.Renders)}}),[]),v=e.regenerate,y=Object(i.useMemo)((function(){return function(){return v(!0,[r.CreateTiles].concat(Object(f.a)(h.slice(2))))}}),[v]);switch(a){case B.Size:return i.createElement(x,{goBack:l,dungeon:e.dungeon,generationSettings:e.generationSettings,setGenerationSettings:e.setGenerationSettings,cellSize:e.cellSize,setRenderSettings:e.setRenderSettings,redraw:function(){return e.regenerate(!1,[r.CreateTiles].concat(Object(f.a)(h.slice(2))))}});case B.Regions:return i.createElement(q,{goBack:l,dungeon:e.dungeon,dungeonDisplay:e.canvas,cellSize:e.cellSize,setRenderSettings:e.setRenderSettings,regenerate:function(t){return e.regenerate(!1,t)}});default:return i.createElement(p,{isGenerating:e.isGenerating,setRenderSettings:e.setRenderSettings,cellSize:e.cellSize,generate:e.generate,animate:y,skip:e.skip,finish:e.finish,showSize:s,showRegions:c,showRenders:d})}},U=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(w.a)(this,Object(S.a)(t).call(this,e))).ctx=void 0,n.root=void 0,n.canvas=void 0,n.state={width:void 0===e.width?0:e.width,height:void 0===e.height?0:e.height},n}return Object(O.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return i.createElement("div",{className:this.props.className,ref:function(t){return e.root=null===t?e.root:t}},i.createElement("canvas",{width:this.props.width,height:this.props.height,ref:function(t){return e.canvas=null===t?e.canvas:t}}))}},{key:"componentDidMount",value:function(){this.updateCtx()}},{key:"componentDidUpdate",value:function(e,t){this.updateCtx()}},{key:"updateCtx",value:function(){if(void 0!==this.canvas){var e=this.canvas.getContext("2d");null!==e&&(this.ctx=e)}}}]),t}(i.Component),X=(i.Component,function(){function e(){Object(k.a)(this,e),this.nodes=[],this.lines=[],this.backdropPoints=[],this.delauneyLines=[],this.gabrielLines=[],this.relativeNeighbourhoodLines=[],this.minimumSpanningLines=[],this.width=0,this.height=0,this.tiles=[],this.tilesByCoordinates=[],this.walls=[]}return Object(j.a)(e,[{key:"getTileAt",value:function(e,t){var n=this.tilesByCoordinates[Math.floor(e)];if(void 0!==n)return n[Math.floor(t)]}}]),e}());n(21);function Y(e,t,n){if(t.clearRect(0,0,e.width*n.cellSize,e.height*n.cellSize),n.drawGrid&&function(e,t,n){e.lineWidth=n.floorGridWidth;var r=!0,i=!1,a=void 0;try{for(var o,l=t.tiles[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){J(o.value,e,n)}}catch(s){i=!0,a=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}}(t,e,n),n.graphAlpha>0&&function(e,t,n){e.globalAlpha=n.graphAlpha,e.strokeStyle="#000",e.lineWidth=n.minimumSpanningWidth;var r=!0,i=!1,a=void 0;try{for(var o,l=t.minimumSpanningLines[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){V(o.value,e,n)}}catch(S){i=!0,a=S}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}e.lineWidth=n.relativeNeighbourhoodWidth;var s=!0,c=!1,u=void 0;try{for(var f,h=t.relativeNeighbourhoodLines[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){V(f.value,e,n)}}catch(S){c=!0,u=S}finally{try{s||null==h.return||h.return()}finally{if(c)throw u}}e.lineWidth=n.gabrielWidth;var d=!0,v=!1,p=void 0;try{for(var y,b=t.gabrielLines[Symbol.iterator]();!(d=(y=b.next()).done);d=!0){V(y.value,e,n)}}catch(S){v=!0,p=S}finally{try{d||null==b.return||b.return()}finally{if(v)throw p}}e.lineWidth=n.delauneyWidth;var g=!0,m=!1,x=void 0;try{for(var k,w=t.delauneyLines[Symbol.iterator]();!(g=(k=w.next()).done);g=!0){V(k.value,e,n)}}catch(S){m=!0,x=S}finally{try{g||null==w.return||w.return()}finally{if(m)throw x}}e.globalAlpha=1}(t,e,n),n.drawOutside&&function(e,t,n){e.fillStyle=n.backgroundColor,e.save(),K(e,t,n),e.fillRect(0,0,t.width*n.cellSize,t.height*n.cellSize),e.strokeStyle=n.hatchingColor,e.lineWidth=n.hatchingWidth;var r=.6*n.cellSize,i=!0,a=!1,o=void 0;try{for(var l,s=t.backdropPoints[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=n.cellSize*c.lengthScale;e.save(),e.translate(c.x*n.cellSize,c.y*n.cellSize),e.rotate(c.rotation),e.beginPath(),e.moveTo(-r,-u-c.topSkew*n.cellSize),e.lineTo(r,-u+c.topSkew*n.cellSize),e.lineTo(r,u-c.bottomSkew*n.cellSize),e.lineTo(-r,u+c.bottomSkew*n.cellSize),e.fill(),e.beginPath(),e.moveTo(-r,-u-c.topSkew*n.cellSize),e.lineTo(-r,u+c.bottomSkew*n.cellSize),e.moveTo(0,-u),e.lineTo(0,u),e.moveTo(r,-u+c.topSkew*n.cellSize),e.lineTo(r,u-c.bottomSkew*n.cellSize),e.stroke(),e.restore()}}catch(f){a=!0,o=f}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}e.restore()}(t,e,n),n.drawOutsidePoints&&function(e,t,n){e.save(),K(e,t,n),e.globalAlpha=.75,e.fillStyle="#009";var r=!0,i=!1,a=void 0;try{for(var o,l=t.backdropPoints[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value;e.beginPath(),e.arc(s.x*n.cellSize,s.y*n.cellSize,.25*n.cellSize,0,2*Math.PI),e.fill()}}catch(c){i=!0,a=c}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}e.restore()}(t,e,n),n.drawWalls){t.strokeStyle=t.fillStyle=n.highlightWallCurves?"#f00":"#000",t.lineCap="round";var r=!0,i=!1,a=void 0;try{for(var o,l=e.walls[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){$(o.value,t,n)}}catch(v){i=!0,a=v}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}t.lineCap="butt"}if(n.drawNodeLinks){t.lineWidth=n.linkWidth,t.strokeStyle=n.linkColor;var s=!0,c=!1,u=void 0;try{for(var f,h=e.lines[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){V(f.value,t,n)}}catch(v){c=!0,u=v}finally{try{s||null==h.return||h.return()}finally{if(c)throw u}}}if(n.nodeAlpha>0){t.globalAlpha=n.nodeAlpha;for(var d=0;d<e.nodes.length;d++)H(e.nodes[d],t,n);t.globalAlpha=1}}function V(e,t,n){t.beginPath(),t.moveTo(e.from.x*n.cellSize,e.from.y*n.cellSize),t.lineTo(e.to.x*n.cellSize,e.to.y*n.cellSize),t.stroke()}function H(e,t,n){t.fillStyle="#c00",t.beginPath(),t.arc(e.x*n.cellSize,e.y*n.cellSize,n.cellSize*e.radius,0,2*Math.PI),t.fill()}function J(e,t,n){!e.isFloor||e.isWall&&!n.drawWallsAsFloor?e.isWall&&(t.fillStyle="#333",t.fillRect(e.x*n.cellSize,e.y*n.cellSize,n.cellSize,n.cellSize)):(t.fillStyle=n.floorColor,t.fillRect(e.x*n.cellSize,e.y*n.cellSize,n.cellSize,n.cellSize),t.strokeStyle=n.floorGridColor,t.strokeRect(e.x*n.cellSize,e.y*n.cellSize,n.cellSize,n.cellSize)),n.regionAlpha>0&&null!==e.region&&(t.globalAlpha=n.regionAlpha,t.fillStyle=e.region.color,t.fillRect(e.x*n.cellSize,e.y*n.cellSize,n.cellSize,n.cellSize),t.globalAlpha=1)}function $(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=n.cellSize/2;if(1!==e.keyPoints.length){var a=e.renderPoints,o=a[0]*n.cellSize+i,l=a[1]*n.cellSize+i;r&&t.beginPath(),t.moveTo(o,l),t.lineWidth=n.wallWidth;for(var s=0;s<a.length;s+=2)o=a[s]*n.cellSize+i,l=a[s+1]*n.cellSize+i,t.lineTo(o,l);r&&t.stroke()}else if(r){var c=e.keyPoints[0],u=c.x*n.cellSize+i,f=c.y*n.cellSize+i;t.beginPath(),t.arc(u,f,n.wallWidth/2,0,2*Math.PI),t.fill()}}function K(e,t,n){e.beginPath(),e.rect(0,0,t.width*n.cellSize,t.height*n.cellSize);var r=!0,i=!1,a=void 0;try{for(var o,l=t.walls[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){$(o.value,e,n,!1)}}catch(s){i=!0,a=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}e.clip("evenodd")}var Q=function(){function e(t){Object(k.a)(this,e),this.seed=t,this.c=void 0,this.s0=void 0,this.s1=void 0,this.s2=void 0;var n=this.mash();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}return Object(j.a)(e,[{key:"next",value:function(){var e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=e-(this.c=0|e)}},{key:"nextInt32",value:function(){return 4294967296*this.next()|0}},{key:"nextInRange",value:function(e,t){return e+this.next()*(t-e)}},{key:"nextIntInRange",value:function(e,t){return Math.floor(this.nextInRange(e,t))}},{key:"nextColor",value:function(){var e=["7","8","9","a","b","c","d"],t=e[this.nextIntInRange(0,e.length)],n=e[this.nextIntInRange(0,e.length)],r=e[this.nextIntInRange(0,e.length)];return"#".concat(t).concat(n).concat(r)}},{key:"mash",value:function(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}}]),e}();function Z(e,t,n,r){return ee.apply(this,arguments)}function ee(){return(ee=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Q(r),o=function(){var e=a.nextInRange(3,t.width-4),n=a.nextInRange(3,t.height-4),r=a.nextInRange(.6,1.8),i=a.nextIntInRange(0,m.NUM_VALUES),o=a.next(),l=a.nextColor();return new C(t,e,n,o,i,l,r)},t.nodes=[],s=0;case 4:if(!(s<n.nodeCount)){e.next=12;break}if(te(t,o,t.width,t.height),!i){e.next=9;break}return e.next=9,i(Je.Small);case 9:s++,e.next=4;break;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,n,r){var i=function(e,t,n,r){var i=(e.x-t.x)/n,a=(e.y-t.y)/r;return i*i+a*a},a=t(),o=t(),l=Number.MAX_VALUE,s=Number.MAX_VALUE,c=!0,u=!1,f=void 0;try{for(var h,d=e.nodes[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value;l=Math.min(l,i(a,v,n,r)),s=Math.min(s,i(o,v,n,r))}}catch(p){u=!0,f=p}finally{try{c||null==d.return||d.return()}finally{if(u)throw f}}e.nodes.push(l<s?o:a)}var ne=function(e){function t(e){var n;Object(k.a)(this,t),(n=Object(w.a)(this,Object(S.a)(t).call(this,e))).circumCenter=void 0,n.circumRadiusSq=void 0;var r=e[0].circumCircle(e[1],e[2]);return n.circumCenter=r[0],n.circumRadiusSq=r[1],n}return Object(O.a)(t,e),t}((function e(t){Object(k.a)(this,e),this.vertices=t}));function re(e,t){if(e.length<3)return[];var n=[];n.push(new ne(t));var r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value,c=[],u=!0,f=!1,h=void 0;try{for(var d,v=n[Symbol.iterator]();!(u=(d=v.next()).done);u=!0){var p=d.value;ie(s,p)&&c.push(p)}}catch(G){f=!0,h=G}finally{try{u||null==v.return||v.return()}finally{if(f)throw h}}for(var y=[],b=0,g=c;b<g.length;b++)for(var m=g[b],x=0;x<3;x++){var k=m.vertices[x],w=m.vertices[2===x?0:x+1],S=!1,O=!0,j=!1,P=void 0;try{for(var C,R=c[Symbol.iterator]();!(O=(C=R.next()).done);O=!0){var E=C.value;if(E!==m&&(-1!==E.vertices.indexOf(k)&&-1!==E.vertices.indexOf(w))){S=!0;break}}}catch(G){j=!0,P=G}finally{try{O||null==R.return||R.return()}finally{if(j)throw P}}S||y.push(k,w)}for(var z=0,T=c;z<T.length;z++){var L=T[z];n.splice(n.indexOf(L),1)}for(var M=0;M<y.length-1;M+=2){var A=new ne([y[M],y[M+1],s]);n.push(A)}}}catch(G){i=!0,a=G}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}for(var W=0;W<n.length;W++){var _=n[W],N=!0,D=!1,F=void 0;try{for(var I,B=_.vertices[Symbol.iterator]();!(N=(I=B.next()).done);N=!0){var q=I.value;if(-1!==t.indexOf(q)){n.splice(W,1),W--;break}}}catch(G){D=!0,F=G}finally{try{N||null==B.return||B.return()}finally{if(D)throw F}}}return n}function ie(e,t){return e.distanceSqTo(t.circumCenter)<=t.circumRadiusSq}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.lines,n=[],r=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value,c=!1,u=s.from.halfwayTo(s.to),f=s.from.distanceSqTo(u),h=!0,d=!1,v=void 0;try{for(var p,y=e.nodes[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var b=p.value;if(b!==s.from&&b!==s.to&&b.distanceSqTo(u)<f){c=!0;break}}}catch(g){d=!0,v=g}finally{try{h||null==y.return||y.return()}finally{if(d)throw v}}c||n.push(s)}}catch(g){i=!0,a=g}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}function oe(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)for(var s=o.value,c=function(e){var r=s.vertices[0===e?s.vertices.length-1:e-1],i=s.vertices[e];n.some((function(e){return e.from===r&&e.to===i||e.from===i&&e.to===r}))||n.push(t(r,i))},u=0;u<s.vertices.length;u++)c(u)}catch(f){i=!0,a=f}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.lines,n=e.nodes.slice(),r=n.pop();if(void 0===r)return[];var i=t.map((function(e){return{link:e,lengthSq:e.from.distanceSqTo(e.to)}}));i.sort((function(e,t){return e.lengthSq-t.lengthSq}));for(var a=[r],o=[];n.length>0&&i.length>0;)for(var l=0;l<i.length;l++){var s=i[l].link,c=-1!==a.indexOf(s.from),u=-1!==a.indexOf(s.to);if(c||u){i.splice(l,1),o.push(s);for(var f=c?s.to:s.from,h=l;h<i.length;h++)((s=i[h].link).from===f&&-1!==a.indexOf(s.to)||s.to===f&&-1!==a.indexOf(s.from))&&(i.splice(h,1),h--);a.push(f);break}}return o}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.lines,n=[],r=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value,c=!1,u=s.from.distanceSqTo(s.to),f=!0,h=!1,d=void 0;try{for(var v,p=e.nodes[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value;if(y!==s.from&&y!==s.to&&(y.distanceSqTo(s.from)<u&&y.distanceSqTo(s.to)<u)){c=!0;break}}}catch(b){h=!0,d=b}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}c||n.push(s)}}catch(b){i=!0,a=b}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}var ce=n(11),ue=function(e){function t(e,n){var r;return Object(k.a)(this,t),r=Object(w.a)(this,Object(S.a)(t).call(this,e,n)),e.links.push(Object(ce.a)(r)),n.links.push(Object(ce.a)(r)),r}return Object(O.a)(t,e),t}((function e(t,n){Object(k.a)(this,e),this.from=t,this.to=n}));function fe(e,t,n,r){return he.apply(this,arguments)}function he(){return(he=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.lines=[],t.delauneyLines=[],t.gabrielLines=[],t.relativeNeighbourhoodLines=[],t.minimumSpanningLines=[],a=[new C(t,0,0,0,m.Artificial,""),new C(t,999999,0,0,m.Artificial,""),new C(t,0,999999,0,m.Artificial,"")],o=re(t.nodes,a),t.delauneyLines=oe(o,(function(e,t){return new ue(e,t)})),!i){e.next=11;break}return e.next=11,i(Je.Medium);case 11:if(t.gabrielLines=ae(t,t.delauneyLines),!i){e.next=15;break}return e.next=15,i(Je.Medium);case 15:if(t.relativeNeighbourhoodLines=se(t,t.gabrielLines),!i){e.next=19;break}return e.next=19,i(Je.Medium);case 19:t.minimumSpanningLines=le(t,t.relativeNeighbourhoodLines);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t,n,r){return ve.apply(this,arguments)}function ve(){return(ve=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s,c,u,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n.connectivity<50?(t.lines=t.minimumSpanningLines.slice(),a=t.relativeNeighbourhoodLines.filter((function(e){return-1===t.lines.indexOf(e)})),o=n.connectivity/50):(t.lines=t.relativeNeighbourhoodLines.slice(),a=t.gabrielLines.filter((function(e){return-1===t.lines.indexOf(e)})),o=(n.connectivity-50)/50),s=new Q(r),c=Math.round(a.length*o),u=c;u>0;u--)f=a.splice(s.nextIntInRange(0,a.length),1)[0],t.lines.push(f);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t,n){return ye.apply(this,arguments)}function ye(){return(ye=Object(c.a)(l.a.mark((function e(t,n,r){var i,a,o,s,c,u,f,h,d,v,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=new Q(n.seed),a=t.tiles.filter((function(e){return e.region===n})),o=a.filter((function(e){return 8===e.adjacentTiles.length&&!e.adjacentTiles.some((function(e){return e.region!==n}))})),s=o.filter((function(e){return!e.isFloor})),c=!0,u=!1,f=void 0,e.prev=7,h=o[Symbol.iterator]();!(c=(d=h.next()).done);c=!0)v=d.value,i.next()<.5&&(v.isFloor=!0);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),u=!0,f=e.t0;case 15:e.prev=15,e.prev=16,c||null==h.return||h.return();case 18:if(e.prev=18,!u){e.next=21;break}throw f;case 21:return e.finish(18);case 22:return e.finish(15);case 23:p=0;case 24:if(!(p<8)){e.next=32;break}if(be(s),!r){e.next=29;break}return e.next=29,r(Je.Small);case 29:p++,e.next=24;break;case 32:ge(t,n,o);case 33:case"end":return e.stop()}}),e,null,[[7,11,15,23],[16,,18,22]])})))).apply(this,arguments)}function be(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value,s=l.isFloor,c=l.adjacentTiles.filter((function(e){return e.isFloor})).length,f=s?c>=4:c>4;t.set(l,f)}}catch(k){r=!0,i=k}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var h=!0,d=!1,v=void 0;try{for(var p,y=t[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var b=p.value,g=Object(u.a)(b,2),m=g[0],x=g[1];m.isFloor=x}}catch(k){d=!0,v=k}finally{try{h||null==y.return||y.return()}finally{if(d)throw v}}}function ge(e,t,n){for(var r=e.tilesByCoordinates[Math.floor(t.x)][Math.floor(t.y)],i=new Set([r]),a=Object(f.a)(r.adjacentTiles);;){var o=a.pop();if(void 0===o)break;o.isFloor&&o.region===t&&!i.has(o)&&(i.add(o),a=[].concat(Object(f.a)(a),Object(f.a)(o.adjacentTiles)))}var l=!0,s=!1,c=void 0;try{for(var u,h=n[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var d=u.value;d.isFloor&&!i.has(d)&&(d.isFloor=!1)}}catch(v){s=!0,c=v}finally{try{l||null==h.return||h.return()}finally{if(s)throw c}}}function me(e,t,n){return xe.apply(this,arguments)}function xe(){return(xe=Object(c.a)(l.a.mark((function e(t,n,r){var i,a,o,s,c,u,f,h,d,v,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new Q(n.seed),a=Math.floor(n.x),o=Math.floor(n.y),s=ke(t,n,a,o,i),c=s.minX,u=s.minY,f=s.maxX,h=s.maxY,d=c;case 5:if(!(d<=f)){e.next=19;break}v=u;case 7:if(!(v<=h)){e.next=16;break}if((p=t.tilesByCoordinates[d][v]).region===n){e.next=11;break}return e.abrupt("continue",13);case 11:p.isFloor=!0,p.region=n;case 13:v++,e.next=7;break;case 16:d++,e.next=5;break;case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t,n,r,i){var a=n,o=n,l=r,s=r;if(i.next()<.5){var c=we(e,t,i,a,l,o,s),f=Object(u.a)(c,2),h=Se(e,t,i,a=f[0],l=f[1],o,s),d=Object(u.a)(h,2);o=d[0],s=d[1]}else{var v=Se(e,t,i,a,l,o,s),p=Object(u.a)(v,2),y=we(e,t,i,a,l,o=p[0],s=p[1]),b=Object(u.a)(y,2);a=b[0],l=b[1]}return i.next()<.75&&(a=i.nextIntInRange(a,n),o=i.nextIntInRange(n+1,o+1),l=i.nextIntInRange(l,r),s=i.nextIntInRange(r+1,s+1)),{minX:a,minY:l,maxX:o,maxY:s}}function we(e,t,n,r,i,a,o){for(var l=!0,s=!0;l||s;)s&&n.next()<.5?s=je(e,t,i-1,r,a)&&--i>2:l&&(l=Oe(e,t,r-1,i,o)&&--r>2);return[r,i]}function Se(e,t,n,r,i,a,o){for(var l=!0,s=!0;l||s;)s&&n.next()<.5?s=je(e,t,o+1,r,a)&&++o<e.height-3:l&&(l=Oe(e,t,a+1,i,o)&&++a<e.width-3);return[a,o]}function Oe(e,t,n,r,i){for(var a=e.tilesByCoordinates[n],o=r;o<=i;o++)if(a[o].region!==t)return!1;return!0}function je(e,t,n,r,i){for(var a=r;a<=i;a++)if(e.tilesByCoordinates[a][n].region!==t)return!1;return!0}function Pe(e,t,n,r){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s,c,u,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,o=!1,s=void 0,e.prev=3,c=t.nodes[Symbol.iterator]();case 5:if(a=(u=c.next()).done){e.next=23;break}f=u.value,e.t0=f.regionType,e.next=e.t0===m.Natural?10:e.t0===m.Artificial?13:16;break;case 10:return e.next=12,pe(t,f,i);case 12:return e.abrupt("break",17);case 13:return e.next=15,me(t,f,i);case 15:return e.abrupt("break",17);case 16:return e.abrupt("continue",20);case 17:if(!i){e.next=20;break}return e.next=20,i(Je.Medium);case 20:a=!0,e.next=5;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(3),o=!0,s=e.t1;case 29:e.prev=29,e.prev=30,a||null==c.return||c.return();case 32:if(e.prev=32,!o){e.next=35;break}throw s;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}}),e,null,[[3,25,29,37],[30,,32,36]])})))).apply(this,arguments)}function Re(e,t,n,r){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s,c,u,f,h,d,v,p,y,b,g,x,k,w,S,O,j,P;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0,o=!0,s=!1,c=void 0,e.prev=4,u=t.tiles[Symbol.iterator]();case 6:if(o=(f=u.next()).done){e.next=74;break}if(!(h=f.value).isFloor){e.next=10;break}return e.abrupt("continue",71);case 10:d=ze(t,h,!0,!1),v=!0,p=!1,y=void 0,e.prev=14,b=d[Symbol.iterator]();case 16:if(v=(g=b.next()).done){e.next=25;break}if(!(x=g.value).isFloor){e.next=22;break}return h.isWall=!0,h.region=x.region,e.abrupt("break",25);case 22:v=!0,e.next=16;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(14),p=!0,y=e.t0;case 31:e.prev=31,e.prev=32,v||null==b.return||b.return();case 34:if(e.prev=34,!p){e.next=37;break}throw y;case 37:return e.finish(34);case 38:return e.finish(31);case 39:k=!0,w=!1,S=void 0,e.prev=42,O=h.adjacentTiles[Symbol.iterator]();case 44:if(k=(j=O.next()).done){e.next=53;break}if(!(P=j.value).isFloor||null===P.region||P.region.regionType!==m.Artificial){e.next=50;break}return h.isWall=!0,h.region=P.region,e.abrupt("break",53);case 50:k=!0,e.next=44;break;case 53:e.next=59;break;case 55:e.prev=55,e.t1=e.catch(42),w=!0,S=e.t1;case 59:e.prev=59,e.prev=60,k||null==O.return||O.return();case 62:if(e.prev=62,!w){e.next=65;break}throw S;case 65:return e.finish(62);case 66:return e.finish(59);case 67:if(!(i&&++a>=t.height)){e.next=71;break}return a=0,e.next=71,i(Je.Tiny);case 71:o=!0,e.next=6;break;case 74:e.next=80;break;case 76:e.prev=76,e.t2=e.catch(4),s=!0,c=e.t2;case 80:e.prev=80,e.prev=81,o||null==u.return||u.return();case 83:if(e.prev=83,!s){e.next=86;break}throw c;case 86:return e.finish(83);case 87:return e.finish(80);case 88:case"end":return e.stop()}}),e,null,[[4,76,80,88],[14,27,31,39],[32,,34,38],[42,55,59,67],[60,,62,66],[81,,83,87]])})))).apply(this,arguments)}function ze(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[];return n&&(t.x>0&&i.push(e.tilesByCoordinates[t.x-1][t.y]),t.x<e.width-1&&i.push(e.tilesByCoordinates[t.x+1][t.y]),t.y>0&&i.push(e.tilesByCoordinates[t.x][t.y-1]),t.y<e.height-1&&i.push(e.tilesByCoordinates[t.x][t.y+1])),r&&(t.x>0&&(t.y>0&&i.push(e.tilesByCoordinates[t.x-1][t.y-1]),t.y<e.height-1&&i.push(e.tilesByCoordinates[t.x-1][t.y+1])),t.x<e.width-1&&(t.y>0&&i.push(e.tilesByCoordinates[t.x+1][t.y-1]),t.y<e.height-1&&i.push(e.tilesByCoordinates[t.x+1][t.y+1]))),i}var Te=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.75;Object(k.a)(this,e),this.curvature=t,this.keyPoints=void 0,this.isLoop=void 0,this.renderPoints=void 0,this.keyPoints=[],this.isLoop=!1,this.renderPoints=[]}return Object(j.a)(e,[{key:"updateRenderPoints",value:function(){if(this.renderPoints=[],!(this.keyPoints.length<2)){var t,n,r,i,a,o,l,s,c,u,f,h,d,v,p=this.curvature,y=[],b=this.keyPoints[0],g=this.keyPoints[this.keyPoints.length-1];b===g?(v=this.keyPoints.length-2,g=this.keyPoints[v]):v=this.keyPoints.length-1;var m=!0,x=!1,k=void 0;try{for(var w,S=this.keyPoints[Symbol.iterator]();!(m=(w=S.next()).done);m=!0){var O=w.value;y.push(O.x,O.y)}}catch(P){x=!0,k=P}finally{try{m||null==S.return||S.return()}finally{if(x)throw k}}if(this.isLoop){var j=this.keyPoints[1];y.push(b.x,b.y),y.push(j.x,j.y),y.unshift(g.x,g.y)}else y.unshift(b.x,b.y),y.push(g.x,g.y);for(d=2;d<y.length-4;d+=2)for(h=0;h<=e.stepsPerSegment;h++)r=(y[d+2]-y[d-2])*p,i=(y[d+4]-y[d])*p,a=(y[d+3]-y[d-1])*p,o=(y[d+5]-y[d+1])*p,f=h/e.stepsPerSegment,l=2*Math.pow(f,3)-3*Math.pow(f,2)+1,s=-2*Math.pow(f,3)+3*Math.pow(f,2),c=Math.pow(f,3)-2*Math.pow(f,2)+f,u=Math.pow(f,3)-Math.pow(f,2),t=l*y[d]+s*y[d+2]+c*r+u*i,n=l*y[d+1]+s*y[d+3]+c*a+u*o,this.renderPoints.push(t),this.renderPoints.push(n)}}}]),e}();function Le(e,t,n,r){return Me.apply(this,arguments)}function Me(){return(Me=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s,c,u,f,h,d,v,p,y;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.walls=[],a=!0,o=!1,s=void 0,e.prev=4,c=t.tiles[Symbol.iterator]();case 6:if(a=(u=c.next()).done){e.next=17;break}if(!(f=u.value).isWall||f.isFloor){e.next=14;break}return e.next=11,Ae(t,f,!0,i);case 11:if(!i){e.next=14;break}return e.next=14,i(Je.Medium);case 14:a=!0,e.next=6;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),o=!0,s=e.t0;case 23:e.prev=23,e.prev=24,a||null==c.return||c.return();case 26:if(e.prev=26,!o){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(23);case 31:for(h=!0,d=!1,v=void 0,e.prev=34,p=t.walls[Symbol.iterator]();!(h=(y=p.next()).done);h=!0)y.value.updateRenderPoints();e.next=42;break;case 38:e.prev=38,e.t1=e.catch(34),d=!0,v=e.t1;case 42:e.prev=42,e.prev=43,h||null==p.return||p.return();case 45:if(e.prev=45,!d){e.next=48;break}throw v;case 48:return e.finish(45);case 49:return e.finish(42);case 50:case"end":return e.stop()}}),e,null,[[4,19,23,31],[24,,26,30],[34,38,42,50],[43,,45,49]])})))).apply(this,arguments)}function Ae(e,t,n,r){return We.apply(this,arguments)}function We(){return(We=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s,c,u,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(t,n,i);case 2:a=e.sent;case 3:if(void 0!==(o=_e(t,a))){e.next=9;break}return r&&Ne(t,a),void 0!==i&&a.updateRenderPoints(),e.abrupt("return",a);case 9:return s=a.keyPoints.indexOf(o),e.next=12,Ae(t,o,!1,i);case 12:if(!((c=e.sent).keyPoints.length<=a.keyPoints.length-s||o===n)){e.next=15;break}return e.abrupt("continue",3);case 15:if(u=c.keyPoints.slice(1),(f=a.keyPoints.splice(s+1)).unshift(o),c.keyPoints=f,a.keyPoints=a.keyPoints.concat(u),r&&Ne(t,c),void 0===i){e.next=26;break}return c.updateRenderPoints(),a.updateRenderPoints(),e.next=26,i(Je.Medium);case 26:e.next=3;break;case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e,t){for(var n=t.keyPoints.length-1;n>=0;n--){var r=t.keyPoints[n];if(void 0!==Be(e,r,!0,!0,(function(e){return!e.isFloor&&e.isWall})))return r}}function Ne(e,t,n){var r=t.keyPoints[0],i=t.keyPoints[t.keyPoints.length-1];if(r===i)t.isLoop=!0;else{var a=t.keyPoints.lastIndexOf(r);if(a>0){var o=new Te;o.keyPoints=t.keyPoints.splice(a+1),o.keyPoints.unshift(t.keyPoints[a]),n&&o.updateRenderPoints(),e.walls.push(o),t.isLoop=!0}if((a=t.keyPoints.indexOf(i))<t.keyPoints.length-1){var l=new Te,s=t.keyPoints[a];l.keyPoints=t.keyPoints.splice(0,a-1),l.keyPoints.push(s),n&&l.updateRenderPoints(),e.walls.push(l),t.isLoop=!0}}}function De(e,t,n){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(c.a)(l.a.mark((function e(t,n,r){var i,a,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new Te,t.walls.push(i),a=n,void 0!==(o=ze(t,n,!0,!0).find((function(e){return e.isWall&&e.isFloor})))&&(i.keyPoints.push(o),n=o),i.keyPoints.push(a),a.isFloor=!0;case 7:if(void 0===(s=Ie(t,a,(function(e){return!e.isFloor&&e.isWall})))?function(){var e=i.keyPoints.length>2?i.keyPoints[i.keyPoints.length-2]:void 0;s=Ie(t,a,(function(t){return t.isWall&&t!==e})),a=void 0}():a=s,s!==n){e.next=12;break}return i.isLoop=!0,e.abrupt("break",23);case 12:if(void 0!==s){e.next=14;break}return e.abrupt("break",23);case 14:if(i.keyPoints.push(s),!s.isFloor){e.next=17;break}return e.abrupt("break",23);case 17:if(s.isFloor=!0,!r){e.next=22;break}return i.updateRenderPoints(),e.next=22,r(Je.Minimal);case 22:if(void 0!==a){e.next=7;break}case 23:if(!r){e.next=27;break}return i.updateRenderPoints(),e.next=27,r(Je.Medium);case 27:return e.abrupt("return",i);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t,n){var r=Be(e,t,!0,!1,n);return void 0!==r?r:Be(e,t,!1,!0,n)}function Be(e,t,n,r,i){var a,o=0,l=ze(e,t,n,r),s=!0,c=!1,u=void 0;try{for(var f,h=l[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;if(i(d)){var v=0,p=ze(e,d,!0,!0),y=!0,b=!1,g=void 0;try{for(var m,x=p[Symbol.iterator]();!(y=(m=x.next()).done);y=!0){m.value.isWall||v++}}catch(k){b=!0,g=k}finally{try{y||null==x.return||x.return()}finally{if(b)throw g}}v>o&&(o=v,a=d)}}}catch(k){c=!0,u=k}finally{try{s||null==h.return||h.return()}finally{if(c)throw u}}return a}function qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t.distanceSqTo(e)},r=Number.MAX_VALUE,i=null,a=!0,o=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value,f=n(u,e);f<r&&(r=f,i=u)}}catch(h){o=!0,l=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}return i}function Ge(e,t,n,r){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s,c,u,f,h,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0,o=function(e,t){return t.distanceSqTo(e)/e.regionInfluence},s=!0,c=!1,u=void 0,e.prev=5,f=t.tiles[Symbol.iterator]();case 7:if(s=(h=f.next()).done){e.next=17;break}if((d=h.value).region=qe(d,t.nodes,o),!(i&&++a>=t.height)){e.next=14;break}return a=0,e.next=14,i(Je.Minimal);case 14:s=!0,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),c=!0,u=e.t0;case 23:e.prev=23,e.prev=24,s||null==f.return||f.return();case 26:if(e.prev=26,!c){e.next=29;break}throw u;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}}),e,null,[[5,19,23,31],[24,,26,30]])})))).apply(this,arguments)}Te.stepsPerSegment=16;var Xe=function(e){function t(e,n,r){var i;if(Object(k.a)(this,t),void 0===r)return(i=Object(w.a)(this,Object(S.a)(t).call(this,e+.5,n+.5))).rotation=void 0,i.lengthScale=void 0,i.topSkew=void 0,i.bottomSkew=void 0,i.rotation=0,i.lengthScale=1,i.topSkew=0,i.bottomSkew=0,Object(w.a)(i);var a=new Q(r+e*e*4987142+5947611*e+n*n*4392871+389711*n);return(i=Object(w.a)(this,Object(S.a)(t).call(this,e+a.nextInRange(.1,.9),n+a.nextInRange(.1,.9)))).rotation=void 0,i.lengthScale=void 0,i.topSkew=void 0,i.bottomSkew=void 0,i.rotation=a.nextInRange(0,2*Math.PI),i.lengthScale=a.nextInRange(.9,1.35),i.topSkew=a.nextInRange(0,.25),i.bottomSkew=a.nextInRange(0,.25),Object(w.a)(i)}return Object(O.a)(t,e),t}(P);function Ye(e,t,n,r){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.tiles.filter((function(e){return e.isWall})),o=new Set,He(a,o),He(Object(f.a)(o),o),He(Object(f.a)(o),o),t.backdropPoints=Object(f.a)(o).filter((function(e){return(e.x+e.y)%2!==0})).map((function(e){return new Xe(e.x,e.y,r)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value,s=!0,c=!1,u=void 0;try{for(var f,h=l.adjacentTiles[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;d.isFloor||t.add(d)}}catch(v){c=!0,u=v}finally{try{s||null==h.return||h.return()}finally{if(c)throw u}}}}catch(v){r=!0,i=v}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}var Je,$e=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(k.a)(this,t),(r=Object(w.a)(this,Object(S.a)(t).call(this,e,n))).isFloor=i,r.isWall=a,r.region=null,r.adjacentTiles=[],r}return Object(O.a)(t,e),t}(P);function Ke(e,t,n,r){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(c.a)(l.a.mark((function e(t,n,r,i){var a,o,s,c,u,f,h,d,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.tiles=[],t.tilesByCoordinates=[],a=0;a<t.width;a++)for(o=new Array(t.height),t.tilesByCoordinates[a]=o,s=0;s<t.height;s++)c=new $e(a,s),o[s]=c,t.tiles.push(c);for(u=t.width-1,f=t.height-1,h=0;h<t.width;h++)for(d=0;d<t.height;d++)v=t.tilesByCoordinates[h][d],h>0&&(d>0&&v.adjacentTiles.push(t.tilesByCoordinates[h-1][d-1]),v.adjacentTiles.push(t.tilesByCoordinates[h-1][d]),d<f&&v.adjacentTiles.push(t.tilesByCoordinates[h-1][d+1])),d>0&&v.adjacentTiles.push(t.tilesByCoordinates[h][d-1]),d<f&&v.adjacentTiles.push(t.tilesByCoordinates[h][d+1]),h<u&&(d>0&&v.adjacentTiles.push(t.tilesByCoordinates[h+1][d-1]),v.adjacentTiles.push(t.tilesByCoordinates[h+1][d]),d<f&&v.adjacentTiles.push(t.tilesByCoordinates[h+1][d+1]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return et.apply(this,arguments)}function et(){return(et=Object(c.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new X,e.next=3,tt(n,t);case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=Object(c.a)(l.a.mark((function e(t,n){var i,a,o,s,u,f,h,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.width=n.cellsWide,t.height=n.cellsHigh,i=new Q(n.seed),a=new Map([[r.CreateTiles,Ke],[r.CreateNodes,Z],[r.AssociateTiles,Ge],[r.LinkNodes,fe],[r.FilterLinks,de],[r.ExpandLines,W],[r.CreateRooms,Pe],[r.DetectWalls,Re],[r.CurveWalls,Le],[r.FillBackdrop,Ye]]),o=!0,s=!1,u=void 0,e.prev=7,f=l.a.mark((function e(){var o,s,u,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=d.value,void 0!==(s=a.get(o))){e.next=4;break}return e.abrupt("return","continue");case 4:return u=i.next(),f=-1!==n.animateSteps.indexOf(o)?function(){var e=Object(c.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==n.animateSteps.indexOf(o)){e.next=2;break}return e.abrupt("return");case 2:return n.redraw(t,o,!1),e.next=5,rt(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():void 0,e.next=8,s(t,n,u,f);case 8:if(-1===n.animateSteps.indexOf(o)||o===r.CreateTiles){e.next=12;break}return n.redraw(t,o,!0),e.next=12,rt(Je.Large);case 12:case"end":return e.stop()}}),e)})),h=n.steps[Symbol.iterator]();case 10:if(o=(d=h.next()).done){e.next=18;break}return e.delegateYield(f(),"t0",12);case 12:if("continue"!==e.t0){e.next=15;break}return e.abrupt("continue",15);case 15:o=!0,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(7),s=!0,u=e.t1;case 24:e.prev=24,e.prev=25,o||null==h.return||h.return();case 27:if(e.prev=27,!s){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}}),e,null,[[7,20,24,32],[25,,27,31]])})))).apply(this,arguments)}function rt(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.None=0]="None",e[e.Minimal=10]="Minimal",e[e.Tiny=50]="Tiny",e[e.Small=100]="Small",e[e.Medium=500]="Medium",e[e.Large=1500]="Large"}(Je||(Je={}));var ot=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function lt(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(22);a.render(i.createElement((function(){var e=i.useRef(null),t=Object(i.useState)(new X),n=Object(u.a)(t,2),a=n[0],o=n[1],s=Object(i.useState)(!1),f=Object(u.a)(s,2),v=f[0],p=f[1],y=Object(i.useState)(d(r.Render,!0,10)),b=Object(u.a)(y,2),g=b[0],m=b[1],x=Object(i.useState)({seed:0,steps:h,animateSteps:[],cellsWide:100,cellsHigh:70,nodeCount:25,connectivity:50,redraw:function(t,n,r){null!==e.current&&Y(t,e.current.ctx,d(n,r,10))}}),k=Object(u.a)(x,2),w=k[0],S=k[1],O=function(){var t=Object(c.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=at({},w,{seed:Math.random(),steps:h,animateSteps:[]}),S(n),p(!0),t.next=5,Ze(n);case 5:r=t.sent,o(r),p(!1),null!==e.current&&Y(r,e.current.ctx,g);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=Object(c.a)(l.a.mark((function t(n,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,tt(a,at({},w,{steps:r,animateSteps:n?r.slice():[]}));case 3:p(!1),null!==e.current&&Y(a,e.current.ctx,g);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){O()}),[]);return i.createElement("div",{className:"App"},i.createElement(G,{dungeon:a,canvas:null===e.current?void 0:e.current.canvas,cellSize:10,isGenerating:v,generationSettings:w,setGenerationSettings:S,setRenderSettings:function(t){m(t),null!==e.current&&Y(a,e.current.ctx,t)},generate:O,regenerate:j,skip:function(){return w.animateSteps.splice(0,1)},finish:function(){return w.animateSteps=[]}}),i.createElement(U,{className:"dungeonDisplay",width:10*w.cellsWide,height:10*w.cellsHigh,ref:e}))}),null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");ot?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):lt(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):lt(e)}))}}()}},[[14,1,2]]]);
//# sourceMappingURL=main.87ece2f1.chunk.js.map